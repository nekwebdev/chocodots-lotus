# shellcheck shell=bash
# shellcheck source=/dev/null
# https://github.com/nekwebdev/chocodots-lotus
# @nekwebdev
# LICENSE: GPLv3
#
# ~/.config/shell/bashrc
#
# symlink to ~/.bashrc
# every interactive non-login shell reads .bashrc first.
# sources our aliases and is the place to add bash related functions.
#
# sources: ChrisTitusTech

# If not running interactively, don't do anything
[[ $- != *i* ]] && return

# iatest=$(expr index "$-" i)

# sourced from zachbrowne.me

# Source global definitions
if [ -f /etc/bashrc ]; then
	 . /etc/bashrc
fi

# Enable bash programmable completion features in interactive shells
if [ -f /usr/share/bash-completion/bash_completion ]; then
	. /usr/share/bash-completion/bash_completion
elif [ -f /etc/bash_completion ]; then
	. /etc/bash_completion
fi

# EXPORTS

# disable the bell
# if [[ $iatest -gt 0 ]]; then bind "set bell-style visible"; fi

# Expand the history size
export HISTFILESIZE=10000
export HISTSIZE=500

# don't put duplicate lines in the history and do not add lines that start with a space
export HISTCONTROL=erasedups:ignoredups:ignorespace

# check the window size after each command and, if necessary, update the values of LINES and COLUMNS
shopt -s checkwinsize

# causes bash to append to history instead of overwriting it so if you start a new terminal, you have old session history
shopt -s histappend
PROMPT_COMMAND='history -a'

# allow ctrl-S for history navigation (with ctrl-R)
[[ $- == *i* ]] && stty -ixon

# color for manpages in less makes manpages a little easier to read
export LESS_TERMCAP_mb=$'\E[01;31m'
export LESS_TERMCAP_md=$'\E[01;31m'
export LESS_TERMCAP_me=$'\E[0m'
export LESS_TERMCAP_se=$'\E[0m'
export LESS_TERMCAP_so=$'\E[01;44;33m'
export LESS_TERMCAP_ue=$'\E[0m'
export LESS_TERMCAP_us=$'\E[01;32m'

# source aliases
[[ -f "$XDG_CONFIG_HOME/shell/aliasrc" ]] && source "$XDG_CONFIG_HOME/shell/aliasrc"

# source completions
if [[ -f "$HOME/.local/src/dotbare/dotbare.plugin.bash" ]]; then
  source "$HOME/.local/src/dotbare/dotbare.plugin.bash"
  _dotbare_completion_cmd dots
fi

# custom prompt
eval "$(starship init bash)"
eval "$(zoxide init bash)"
